<div class="barra-superior">
  <div class="icono-izquierda">
    <img src="./images/logo-app.png" />
  </div>

  <div class="nombre-partida">{{ nombrePartida }}</div>

  <div class="acciones-derecha">
    <!-- ✅ CORREGIDO: usamos `.set(true)` en lugar de asignación directa -->
    <button class="iniciales-boton" (click)="mostrarAdminModal.set(true)">
      {{ inicialesPropietario }}
    </button>
    <button class="btn-invitar" (click)="mostrarInvitarModal.set(true)">
      Invitar jugadores
    </button>
  </div>
</div>

<!-- ✅ CORREGIDO: usamos .() para evaluar signal -->
<app-admin-modal-controls-component
  *ngIf="mostrarAdminModal() && usuarioActual"
  [usuarioActual]="usuarioActual"
  [jugadores]="usuariosEnMesa"
  [cartasReveladas]="cartasReveladas"
  (cerrar)="mostrarAdminModal.set(false)"
  (cambiarModoUsuario)="onCambiarModo()"
></app-admin-modal-controls-component>

<!-- ✅ CORREGIDO: usamos .() para mostrar modal -->
<app-invitar-jugadores-modal-component
  *ngIf="mostrarInvitarModal()"
  [partida]="nombrePartida"
  (cerrar)="mostrarInvitarModal.set(false)"
></app-invitar-jugadores-modal-component>

<!-- ✅ Mesa de votación -->
<app-mesa-votacion-template-component
  [usuarioActual]="usuarioActual!"
  [usuariosEnMesa]="usuariosEnMesa"
  [cartas]="cartasDisponibles"
  [cartasReveladas]="cartasReveladas"
  [promedio]="promedioVotacion()"
  [votos]="votosPorCarta()"
  [mostrarResumen]="mostrarResumen()"
  [reiniciarSeleccion]="reiniciarSeleccion"
  (seleccionarCarta)="manejarCartaSeleccionada($event)"
  (invitar)="mostrarInvitarModal.set(true)"
  (revelar)="revelarCartas()"
  (reiniciar)="reiniciarPartida()"
  (contarVotosClick)="contarVotos()"
  [animandoConteo]="animandoConteo()"
  [todosHanVotado]="todosHanVotado"
  [esPropietario]="usuarioActual?.rol === 'propietario'"
></app-mesa-votacion-template-component>

<!-- ✅ Modal para crear usuario -->
<app-crear-usuario-modal-component
  *ngIf="mostrarModal()"
  [nombrePartida]="nombrePartida"
  (usuarioCreado)="guardarUsuario($event)"
  (cerrar)="mostrarModal.set(false)"
></app-crear-usuario-modal-component>

<app-mensaje-emergente-component></app-mensaje-emergente-component>
